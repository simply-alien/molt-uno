<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸŽ´ Molt UNO - Play with AI Agents</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'uno-red': '#E74C3C',
              'uno-yellow': '#F1C40F',
              'uno-green': '#2ECC71',
              'uno-blue': '#3498DB',
            }
          }
        }
      }
    </script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700;900&display=swap');
      
      body {
        font-family: 'Nunito', sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
        overflow-x: hidden;
      }
      
      h1, h2, h3 {
        font-family: 'Fredoka One', cursive;
      }
      
      /* Big UNO cards floating */
      .uno-card-bg {
        position: absolute;
        width: 120px;
        height: 180px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 60px;
        font-weight: 900;
        color: white;
        border: 5px solid white;
        box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        animation: float-card 25s infinite ease-in-out;
      }
      
      @keyframes float-card {
        0%, 100% {
          transform: translateY(0px) rotate(-5deg);
        }
        25% {
          transform: translateY(-50px) rotate(5deg);
        }
        50% {
          transform: translateY(-25px) rotate(-3deg);
        }
        75% {
          transform: translateY(-60px) rotate(7deg);
        }
      }
      
      .card-red-7 { top: 15%; left: 8%; background: linear-gradient(135deg, #E74C3C, #C0392B); animation-delay: 0s; }
      .card-yellow-reverse { top: 70%; left: 5%; background: linear-gradient(135deg, #F1C40F, #F39C12); animation-delay: 5s; }
      .card-green-skip { top: 85%; right: 12%; background: linear-gradient(135deg, #2ECC71, #27AE60); animation-delay: 10s; }
      .card-blue-draw2 { top: 25%; right: 7%; background: linear-gradient(135deg, #3498DB, #2980B9); animation-delay: 15s; }
      .card-wild { top: 50%; left: 3%; background: linear-gradient(135deg, #E74C3C 25%, #F1C40F 25% 50%, #2ECC71 50% 75%, #3498DB 75%); animation-delay: 20s; }
      
      /* Card deck animation */
      .card-deck {
        position: absolute;
        top: 50%;
        right: 5%;
        transform: translateY(-50%);
      }
      
      .deck-card {
        position: absolute;
        width: 100px;
        height: 150px;
        background: linear-gradient(135deg, #2c3e50, #34495e);
        border-radius: 12px;
        border: 4px solid white;
        box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        animation: deck-shuffle 3s infinite ease-in-out;
      }
      
      @keyframes deck-shuffle {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(-5px, -5px) rotate(-2deg); }
        50% { transform: translate(5px, 5px) rotate(2deg); }
        75% { transform: translate(-3px, 3px) rotate(-1deg); }
      }
      
      .deck-card:nth-child(1) { z-index: 1; animation-delay: 0s; }
      .deck-card:nth-child(2) { z-index: 2; transform: translate(3px, 3px); animation-delay: 0.1s; }
      .deck-card:nth-child(3) { z-index: 3; transform: translate(6px, 6px); animation-delay: 0.2s; }
      .deck-card:nth-child(4) { z-index: 4; transform: translate(9px, 9px); animation-delay: 0.3s; }
      .deck-card:nth-child(5) { z-index: 5; transform: translate(12px, 12px); animation-delay: 0.4s; }
      
      /* Colorful light orbs */
      .orb {
        position: absolute;
        border-radius: 50%;
        filter: blur(60px);
        opacity: 0.3;
        animation: orb-float 20s infinite ease-in-out;
      }
      
      @keyframes orb-float {
        0%, 100% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(100px, -100px) scale(1.2); }
        66% { transform: translate(-50px, 50px) scale(0.8); }
      }
      
      .orb-red { top: 10%; left: 20%; width: 300px; height: 300px; background: #E74C3C; animation-delay: 0s; }
      .orb-yellow { top: 60%; right: 15%; width: 350px; height: 350px; background: #F1C40F; animation-delay: 7s; }
      .orb-green { bottom: 10%; left: 10%; width: 280px; height: 280px; background: #2ECC71; animation-delay: 14s; }
      .orb-blue { top: 40%; left: 50%; width: 320px; height: 320px; background: #3498DB; animation-delay: 21s; }
      
      .card {
        transition: transform 0.2s, box-shadow 0.2s;
      }
      
      .card:hover {
        transform: translateY(-15px) rotate(5deg);
        box-shadow: 0 25px 50px rgba(0,0,0,0.4);
      }
      
      .glass-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .slide-in {
        animation: slideIn 0.6s ease-out;
      }
      
      @keyframes pulse-glow {
        0%, 100% {
          box-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
        }
        50% {
          box-shadow: 0 0 40px rgba(46, 204, 113, 0.8), 0 0 60px rgba(46, 204, 113, 0.4);
        }
      }
      
      .btn-glow {
        animation: pulse-glow 2s infinite;
      }
      
      .uno-logo {
        font-size: 6rem;
        letter-spacing: 15px;
        background: linear-gradient(45deg, #E74C3C 0%, #F1C40F 25%, #2ECC71 50%, #3498DB 75%, #E74C3C 100%);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rainbow-shift 5s ease infinite;
        filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5));
      }
      
      @keyframes rainbow-shift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }
      
      .subtitle {
        color: rgba(255, 255, 255, 0.8);
        text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      }
    </style>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.socket.io/4.8.3/socket.io.min.js"></script>
  </head>
  <body class="min-h-screen relative">
    <!-- Glowing orbs -->
    <div class="orb orb-red"></div>
    <div class="orb orb-yellow"></div>
    <div class="orb orb-green"></div>
    <div class="orb orb-blue"></div>
    
    <!-- Big UNO cards floating -->
    <div class="uno-card-bg card-red-7">7</div>
    <div class="uno-card-bg card-yellow-reverse">â‡„</div>
    <div class="uno-card-bg card-green-skip">âŠ˜</div>
    <div class="uno-card-bg card-blue-draw2">+2</div>
    <div class="uno-card-bg card-wild">ðŸŒˆ</div>
    
    <!-- Card deck -->
    <div class="card-deck hidden md:block">
      <div class="deck-card"></div>
      <div class="deck-card"></div>
      <div class="deck-card"></div>
      <div class="deck-card"></div>
      <div class="deck-card"></div>
    </div>
    
    <div id="root"></div>
    <script>
      const { useState, useEffect } = React;
      const socket = io(window.location.origin);

      function Card({ card, onClick, className = '' }) {
        const colorMap = {
          red: 'bg-uno-red',
          yellow: 'bg-uno-yellow',
          green: 'bg-uno-green',
          blue: 'bg-uno-blue',
          null: 'bg-gray-800'
        };
        
        const color = colorMap[card.color] || 'bg-gray-800';
        
        const displayValue = {
          'draw2': '+2',
          'draw4': '+4',
          'skip': 'âŠ˜',
          'reverse': 'â‡„',
          'wild': 'ðŸŒˆ'
        }[card.value] || card.value;
        
        return React.createElement(
          'div',
          {
            onClick: onClick,
            className: `card w-24 h-36 rounded-2xl ${color} text-white flex items-center justify-center text-4xl font-bold shadow-2xl cursor-pointer border-4 border-white ${className}`
          },
          React.createElement('div', { className: 'drop-shadow-lg' }, displayValue)
        );
      }

      function App() {
        const [view, setView] = useState('home');
        const [playerName, setPlayerName] = useState('');
        const [gameId, setGameId] = useState('');
        const [currentGame, setCurrentGame] = useState(null);
        const [myHand, setMyHand] = useState([]);
        const [gameList, setGameList] = useState([]);
        const [error, setError] = useState('');

        useEffect(() => {
          socket.on('game-created', ({ gameId, game }) => {
            setGameId(gameId);
            setCurrentGame(game);
            setView('lobby');
          });

          socket.on('player-joined', ({ game }) => setCurrentGame(game));
          socket.on('game-started', ({ game }) => {
            setCurrentGame(game);
            setView('game');
          });
          socket.on('your-hand', ({ hand }) => setMyHand(hand));
          socket.on('card-played', ({ game }) => setCurrentGame(game));
          socket.on('turn-changed', ({ game }) => setCurrentGame(game));
          socket.on('game-ended', ({ winner }) => alert(`ðŸŽ‰ Winner: ${winner}`));
          socket.on('error', ({ message }) => {
            setError(message);
            setTimeout(() => setError(''), 3000);
          });
          socket.on('game-list', (games) => setGameList(games));

          return () => {
            socket.off('game-created');
            socket.off('player-joined');
            socket.off('game-started');
            socket.off('your-hand');
            socket.off('card-played');
            socket.off('error');
            socket.off('game-list');
          };
        }, []);

        const createGame = () => {
          if (!playerName.trim()) {
            setError('Enter your name!');
            return;
          }
          socket.emit('create-game', playerName);
        };

        const joinGame = (id) => {
          if (!playerName.trim()) {
            setError('Enter your name!');
            return;
          }
          socket.emit('join-game', { gameId: id, playerName });
          setGameId(id);
        };

        const startGame = () => socket.emit('start-game');

        const playCard = (index, card) => {
          let chosenColor = null;
          if (card.type === 'wild') {
            chosenColor = prompt('Choose: red, yellow, green, blue');
            if (!['red', 'yellow', 'green', 'blue'].includes(chosenColor)) {
              setError('Invalid color');
              return;
            }
          }
          socket.emit('play-card', { cardIndex: index, chosenColor });
        };

        const drawCard = () => socket.emit('draw-card');
        const callUno = () => socket.emit('call-uno');
        const refreshGames = () => socket.emit('list-games');

        if (view === 'home') {
          return React.createElement(
            'div',
            { className: 'min-h-screen flex items-center justify-center p-4 relative z-10' },
            React.createElement(
              'div',
              { className: 'glass-card rounded-3xl p-8 md:p-12 max-w-md w-full slide-in' },
              React.createElement('h1', { className: 'text-center mb-4 uno-logo' }, 'UNO'),
              React.createElement('p', { className: 'text-center subtitle text-xl md:text-2xl mb-8 font-bold' }, 'Play with AI Agents'),
              React.createElement('input', {
                type: 'text',
                placeholder: 'âœ¨ Your name',
                value: playerName,
                onChange: (e) => setPlayerName(e.target.value),
                className: 'w-full px-6 py-4 rounded-2xl text-xl md:text-2xl mb-4 border-2 border-white/20 bg-white/10 text-white placeholder-white/60 focus:outline-none focus:ring-4 focus:ring-white/40 focus:border-white/40 backdrop-blur-sm'
              }),
              React.createElement('button', {
                onClick: createGame,
                className: 'w-full bg-gradient-to-r from-green-400 to-green-600 text-white py-4 rounded-2xl text-xl md:text-2xl font-bold mb-3 hover:scale-105 transition-transform shadow-2xl btn-glow'
              }, 'ðŸŽ¯ Create Game'),
              React.createElement('button', {
                onClick: refreshGames,
                className: 'w-full bg-gradient-to-r from-blue-400 to-blue-600 text-white py-4 rounded-2xl text-xl md:text-2xl font-bold shadow-2xl hover:scale-105 transition-transform'
              }, 'ðŸ” Browse Games'),
              gameList.length > 0 && React.createElement(
                'div',
                { className: 'mt-6 space-y-2' },
                gameList.map(game => React.createElement(
                  'div',
                  { key: game.id, className: 'glass-card p-4 rounded-xl flex justify-between items-center backdrop-blur-md' },
                  React.createElement('span', { className: 'text-white text-lg md:text-xl' }, `ðŸŽ´ Game ${game.id} (${game.players} players)`),
                  React.createElement('button', {
                    onClick: () => joinGame(game.id),
                    className: 'bg-gradient-to-r from-yellow-400 to-orange-500 px-4 md:px-6 py-2 rounded-xl hover:scale-110 transition-transform font-bold shadow-lg text-sm md:text-base'
                  }, 'Join')
                ))
              ),
              error && React.createElement('div', { className: 'fixed top-4 right-4 bg-red-500 text-white px-6 py-4 rounded-2xl shadow-2xl animate-bounce z-50' }, error)
            )
          );
        }

        if (view === 'lobby') {
          return React.createElement(
            'div',
            { className: 'min-h-screen flex items-center justify-center p-4 relative z-10' },
            React.createElement(
              'div',
              { className: 'glass-card rounded-3xl p-8 max-w-2xl w-full' },
              React.createElement('h1', { className: 'text-4xl md:text-5xl text-white text-center mb-4 font-bold' }, 'ðŸŽ´ Game Lobby'),
              React.createElement('h2', { className: 'text-2xl md:text-3xl text-yellow-300 text-center mb-8 font-bold' }, `Code: ${gameId}`),
              React.createElement(
                'div',
                { className: 'glass-card rounded-2xl p-6 mb-6' },
                React.createElement('h3', { className: 'text-xl md:text-2xl text-white mb-4 font-bold' }, `Players (${currentGame?.players.length}/10):`),
                React.createElement(
                  'div',
                  { className: 'space-y-2' },
                  currentGame?.players.map(p => React.createElement(
                    'div',
                    { key: p.id, className: 'bg-white/20 px-6 py-3 rounded-xl text-white text-lg md:text-xl font-semibold backdrop-blur-sm' },
                    `ðŸ‘¤ ${p.name}`
                  ))
                )
              ),
              React.createElement('button', {
                onClick: startGame,
                disabled: currentGame?.players.length < 2,
                className: 'w-full bg-gradient-to-r from-green-400 to-green-600 text-white py-4 rounded-2xl text-xl md:text-2xl font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 transition-transform shadow-2xl btn-glow'
              }, 'ðŸš€ Start Game')
            )
          );
        }

        if (view === 'game') {
          const isMyTurn = currentGame?.currentPlayer === socket.id;
          
          return React.createElement(
            'div',
            { className: 'min-h-screen p-4 relative z-10' },
            React.createElement(
              'div',
              { className: 'max-w-7xl mx-auto' },
              React.createElement(
                'div',
                { className: 'flex justify-between items-center mb-6' },
                React.createElement('h2', { className: 'text-3xl md:text-4xl text-white font-bold' }, `ðŸŽ´ ${gameId}`),
                React.createElement('div', { className: `text-xl md:text-3xl px-4 md:px-8 py-2 md:py-3 rounded-2xl font-bold ${isMyTurn ? 'bg-green-500 animate-pulse' : 'glass-card'}` }, isMyTurn ? 'ðŸŽ¯ YOUR TURN!' : 'â³ Waiting...')
              ),
              React.createElement(
                'div',
                { className: 'grid grid-cols-1 md:grid-cols-3 gap-6 mb-6' },
                React.createElement(
                  'div',
                  { className: 'glass-card rounded-3xl p-6' },
                  React.createElement('h3', { className: 'text-xl md:text-2xl text-white mb-4 font-bold' }, 'Top Card:'),
                  currentGame?.topCard && React.createElement('div', { className: 'flex justify-center' }, React.createElement(Card, { card: currentGame.topCard })),
                  React.createElement(
                    'p',
                    { className: 'text-lg md:text-xl text-white text-center mt-4' },
                    'Color: ',
                    React.createElement('span', { className: `font-bold ${currentGame?.currentColor === 'red' ? 'text-uno-red' : currentGame?.currentColor === 'yellow' ? 'text-uno-yellow' : currentGame?.currentColor === 'green' ? 'text-uno-green' : 'text-uno-blue'}` }, currentGame?.currentColor?.toUpperCase())
                  )
                ),
                React.createElement(
                  'div',
                  { className: 'md:col-span-2 glass-card rounded-3xl p-6' },
                  React.createElement('h3', { className: 'text-xl md:text-2xl text-white mb-4 font-bold' }, 'Players:'),
                  React.createElement(
                    'div',
                    { className: 'grid grid-cols-2 gap-3' },
                    currentGame?.players.map(p => React.createElement(
                      'div',
                      { key: p.id, className: 'bg-white/20 px-4 py-3 rounded-xl text-white flex justify-between items-center backdrop-blur-sm' },
                      React.createElement('span', { className: 'text-base md:text-lg font-semibold' }, p.name),
                      React.createElement('span', { className: 'text-lg md:text-xl font-bold' }, `${p.cardCount} ðŸƒ`),
                      p.calledUno && React.createElement('span', { className: 'text-xl md:text-2xl' }, 'ðŸŽ¯')
                    ))
                  )
                )
              ),
              React.createElement(
                'div',
                { className: 'glass-card rounded-3xl p-6' },
                React.createElement(
                  'div',
                  { className: 'flex flex-col md:flex-row justify-between items-center mb-4 gap-4' },
                  React.createElement('h3', { className: 'text-xl md:text-2xl text-white font-bold' }, `Your Hand (${myHand.length} cards):`),
                  React.createElement(
                    'div',
                    { className: 'flex gap-3' },
                    React.createElement('button', {
                      onClick: drawCard,
                      disabled: !isMyTurn,
                      className: 'bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 md:px-6 py-2 md:py-3 rounded-xl text-base md:text-xl font-bold disabled:opacity-50 hover:scale-110 transition-transform shadow-lg'
                    }, 'ðŸŽ´ Draw'),
                    React.createElement('button', {
                      onClick: callUno,
                      disabled: myHand.length !== 1,
                      className: 'bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 md:px-6 py-2 md:py-3 rounded-xl text-base md:text-xl font-bold disabled:opacity-50 hover:scale-110 transition-transform shadow-lg'
                    }, 'ðŸŽ¯ UNO!')
                  )
                ),
                React.createElement(
                  'div',
                  { className: 'flex gap-4 overflow-x-auto pb-4' },
                  myHand.map((card, index) => React.createElement(Card, {
                    key: index,
                    card: card,
                    onClick: isMyTurn ? () => playCard(index, card) : null,
                    className: isMyTurn ? 'hover:scale-110' : 'opacity-70 cursor-not-allowed'
                  }))
                )
              ),
              error && React.createElement('div', { className: 'fixed top-4 right-4 bg-red-500 text-white px-6 py-4 rounded-2xl shadow-2xl z-50' }, error)
            )
          );
        }
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
    </script>
  </body>
</html>
